{"version":3,"file":"/Users/joseph/Documents/Developement/cozycloud/dev-env/tasky/build/client/public/javascripts/app.js","sources":["app/application.coffee","app/collections/archived_tasks.coffee","app/collections/tags.coffee","app/collections/tasks.coffee","app/initialize.coffee","app/lib/base_view.coffee","app/lib/utils.coffee","app/lib/view_collection.coffee","app/locales/en.coffee","app/locales/fr.coffee","app/models/task.coffee","app/router.coffee","app/views/app_view.coffee","app/views/archive_list_view.coffee","app/views/archive_task_view.coffee","app/views/breadcrumb_item.coffee","app/views/breadcrumb_view.coffee","app/views/menu_item_view.coffee","app/views/menu_view.coffee","app/views/task_form_view.coffee","app/views/task_list_view.coffee","app/views/task_view.coffee","app/views/templates/home.jade","app/views/templates/menu.jade","app/views/templates/menu_item.jade","app/views/templates/task.jade","app/views/templates/task_archive.jade","app/views/templates/task_form.jade","app/views/templates/task_list.jade","app/views/templates/task_list_archive.jade"],"names":[],"mappings":"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","sourcesContent":["module.exports =\n\n    initialize: ->\n        # Used in inter-app communication\n        #SocketListener = require '../lib/socket_listener'\n\n        @locale = window.locale\n        delete window.locale\n\n        @polyglot = new Polyglot locale: @locale\n        try\n            locales = require 'locales/'+ @locale\n        catch e\n            locales = require 'locales/en'\n\n        @polyglot.extend locales\n        window.t = @polyglot.t.bind @polyglot\n\n        # Routing management\n        Router = require 'router'\n        @router = new Router()\n        Backbone.history.start()\n\n        # Makes this object immuable.\n        Object.freeze this if typeof Object.freeze is 'function'","TaskCollection = require './tasks'\n\nmodule.exports = class ArchivedTaskCollection extends TaskCollection\n\n    comparator: (a, b) ->\n        if a.get('completionDate') > b.get('completionDate')\n            return -1\n        else if a.get('completionDate') is b.get('completionDate')\n            return 0\n        else return 1\n","module.exports = class TagsCollection extends Backbone.Collection\n\n    comparator: (a, b) ->\n        if a.get('count') > b.get('count')\n            return -1\n        else if a.get('count') is b.get('count')\n            if a.get('id') < b.get('id')\n                return -1\n            else if a.get('id') > b.get('id')\n                return 1\n            else\n                return 0\n        else\n            return 1\n\n    @extractFromTasks: (taskCollection, excludes = [], selectedTags = []) ->\n        tagsList = new TagsCollection()\n\n        taskCollection.pluck('tags').forEach (tagsOfTask) ->\n            tagsOfTask.forEach (tag) ->\n                tag = tag.toLowerCase()\n                unless _.contains excludes, tag\n                    if not tagsList.get(tag)?\n                        tagsList.add new Backbone.Model\n                            id: tag\n                            count: 0\n                            selectIndex: selectedTags.indexOf tag\n                    tagInfo = tagsList.get tag\n                    tagInfo.set 'count', tagInfo.get('count') + 1\n\n        tagsList.sort()\n        return tagsList\n","TagsCollection = require './tags'\nTask = require '../models/task'\n\nmodule.exports = class TaskCollection extends Backbone.Collection\n\n    url: 'tasks'\n    model: Task\n\n    comparator: (a, b) ->\n        if a.get('order') < b.get('order')\n            return -1\n        else if a.get('order') is b.get('order')\n            return 0\n        else return 1\n\n    getNewOrder: (prev, next) ->\n\n        topBoundary = if next? then next.get 'order' else Number.MAX_VALUE\n        lowBoundary = if prev? then prev.get 'order' else 0.0\n\n        step = (topBoundary - lowBoundary) / 2\n        order = lowBoundary + step\n\n        return {order, step}\n\n    # Returns tags once\n    getAllTags: -> return TagsCollection.extractFromTasks @\n\n    getByTags: (tags) ->\n\n        # all the tasks, no matter how tagged they are\n        return @ if tags is undefined or tags is null\n\n        # untagged tasks\n        if tags.length is 0\n            return new BackboneProjections.Filtered @,\n                filter: (task) -> task.get('tags').length is 0\n\n        return new BackboneProjections.Filtered @,\n                filter: (task) -> task.containsTags tags\n\n    reindex: ->\n        @trigger 'reindexing'\n        $.ajax 'tasks/reindex',\n            method: 'POST'\n            success: (data) =>\n                data.forEach (task) => @get(task.id).set 'order', task.order\n                @trigger 'reindexed'\n            error: (data) =>\n                @trigger 'reindexed', data\n","app = require 'application'\n\n# The function called from index.html\n$ ->\n    $.fn.spin = (opts, color) ->\n        presets =\n            tiny:\n                lines: 8\n                length: 2\n                width: 2\n                radius: 3\n\n            small:\n                lines: 8\n                length: 1\n                width: 2\n                radius: 4\n\n            medium:\n                lines: 10\n                length: 4\n                width: 3\n                radius: 6\n\n            large:\n                lines: 10\n                length: 8\n                width: 4\n                radius: 8\n\n            extralarge:\n                lines: 8\n                length: 3\n                width: 10\n                radius: 20\n                top: 30\n                left: 50\n\n        if Spinner?\n            @each ->\n                $this = $(this)\n                spinner = $this.data(\"spinner\")\n                if spinner?\n                    spinner.stop()\n                    $this.data \"spinner\", null\n                else if opts isnt false\n                    if typeof opts is \"string\"\n                        if opts of presets\n                            opts = presets[opts]\n                        else\n                            opts = {}\n                        if color then opts.color = color\n\n                    spinner = new Spinner opts\n                    spinner.spin(this)\n                    $this.data \"spinner\", spinner\n\n    app.initialize()","module.exports = class BaseView extends Backbone.View\n\n    template: ->\n\n    initialize: ->\n\n    getRenderData: ->\n        model: @model?.toJSON()\n\n    render: ->\n        @beforeRender()\n        @$el.html @template(@getRenderData())\n        @afterRender()\n        @\n\n    beforeRender: ->\n\n    afterRender: ->\n\n    destroy: ->\n        @undelegateEvents()\n        @$el.removeData().unbind()\n        @remove()\n        Backbone.View::remove.call @\n","module.exports.buildTagsList = (tags, options = {}) ->\n\n    tagPrefix = options.tagPrefix or ''\n    regularSeparator = options.regularSeparator or ' '\n    lastSeparator = options.lastSeparator or ' '\n\n    return \"\" if not tags?\n    tagsList = \"\"\n    tags.forEach (tag) ->\n        if tags.indexOf(tag) is 0\n            tagsList = \"#{tagPrefix}#{tag}\"\n        else if tags.indexOf(tag) is (tags.length - 1)\n            tagsList = \"#{tagsList}#{lastSeparator}#{tagPrefix}#{tag}\"\n        else\n            tagsList = \"#{tagsList}#{regularSeparator}#{tagPrefix}#{tag}\"\n    return tagsList","BaseView = require 'lib/base_view'\n\n# View that display a collection of subitems\n# used to DRY views\n# Usage : new ViewCollection(collection:collection)\n# Automatically populate itself by creating a itemView for each item\n# in its collection\n\n# can use a template that will be displayed alongside the itemViews\n\n# itemView       : the Backbone.View to be used for items\n# itemViewOptions : the options that will be passed to itemViews\n# collectionEl : the DOM element's selector where the itemViews will\n#                be displayed. Automatically falls back to el if null\n\nmodule.exports = class ViewCollection extends BaseView\n\n    itemview: null\n\n    views: {}\n\n    template: -> ''\n\n    itemViewOptions: ->\n\n    collectionEl: null\n\n    # add 'empty' class to view when there is no subview\n    onChange: ->\n        @$el.toggleClass 'empty', _.size(@views) is 0\n\n    # can be overriden if we want to place the subviews somewhere else\n    appendView: (view) ->\n        @$collectionEl.append view.el\n\n    # bind listeners to the collection\n    initialize: ->\n        super\n        @views = {}\n        @listenTo @collection, \"reset\",   @onReset\n        @listenTo @collection, \"add\",     @addItem\n        @listenTo @collection, \"remove\",  @removeItem\n\n        if not @collectionEl?\n            collectionEl = el\n\n    # if we have views before a render call, we detach them\n    render: ->\n        view.$el.detach() for id, view of @views\n        super\n\n    # after render, we reattach the views\n    afterRender: ->\n        @$collectionEl = $(@collectionEl)\n        @appendView view.$el for id, view of @views\n        @onReset @collection\n        @onChange @views\n\n    # destroy all sub views before remove\n    remove: ->\n        @onReset []\n        super\n\n    # event listener for reset\n    onReset: (newcollection) ->\n        view.remove() for id, view of @views\n        newcollection.forEach @addItem\n\n    # event listeners for add\n    addItem: (model) =>\n        options = _.extend {}, {model: model}, @itemViewOptions(model)\n        view = new @itemView(options)\n        @views[model.cid] = view.render()\n        @appendView view\n        @onChange @views\n\n    # event listeners for remove\n    removeItem: (model) =>\n        @views[model.cid].remove()\n        delete @views[model.cid]\n\n        @onChange @views","module.exports =\n    \"todo\": \"To-do\"\n    \"archived\": \"Archived\"\n    \"untagged\": \"untagged\"\n    \"all tasks\": \"All tasks\"\n    \"all archived tasks\": \"All archived tasks\"\n    \"untagged tasks\": \"Untagged tasks\"\n    \"tasks of\": \"Tasks related to\"\n    \"archived tasks of\": \"Archived tasks related to %{tagsList}\"\n    \"and\": \"and\"\n    \"archived date format\": \"{yyyy}/{MM}{dd} at {HH}:{mm}\"\n    \"actions headline\": \"Actions\"\n    \"completed headline\": \"Completed on\"\n    \"restore button\": \"Restore\"\n    \"restore button?\": \"Restore?\"\n    \"done button\": \"Done\"\n    \"done button?\": \"Done?\"\n    \"todo button\": \"Todo\"\n    \"todo button?\": \"Todo?\"\n    \"new button\": \"New\"\n    \"archive button\": \"Archive all done tasks\"\n    \"form headline tags\": \"What's next about %{tagsList}?\"\n    \"form headline\": \"What's next?\"\n    \"reindexing message\": \"Server is reindexing all the tasks, please wait a little...\"\n    \"search tag input\": \"search...\"\n    \"match criterion no tag\": \"of criterion\"\n    \"match criterion with tag\": \"and of criterion\"\n","module.exports =\n    \"todo\": \"A faire\"\n    \"archived\": \"Archives\"\n    \"untagged\": \"sans tiquette\"\n    \"all tasks\": \"Toutes les tches\"\n    \"all archived tasks\": \"Toutes les tches archives\"\n    \"untagged tasks\": \"Tches sans tiquettes\"\n    \"tasks of\": \"Tches de\"\n    \"archived tasks of\": \"Tches archives de %{tagsList}\"\n    \"and\": \"et\"\n    \"archived date format\": \"{dd}/{MM}/{yyyy}  {HH}h{mm}\"\n    \"actions headline\": \"Actions\"\n    \"completed headline\": \"Complte le\"\n    \"restore button\": \"Restaurer\"\n    \"restore button?\": \"Restaurer ?\"\n    \"done button\": \"Fait\"\n    \"done button?\": \"Fait ?\"\n    \"todo button\": \"A faire\"\n    \"todo button?\": \"A faire ?\"\n    \"new button\": \"Ajouter\"\n    \"archive button\": \"Archiver toutes les tches faites\"\n    \"form headline tags\": \"Que devez-vous faire  propos de %{tagsList} ?\"\n    \"form headline\": \"Que devez-vous faire ?\"\n    \"reindexing message\": \"Le serveur est en train de r-indexer les tches, merci de patienter...\"\n    \"search tag input\": \"recherche...\"\n    \"match criterion no tag\": \"correspondant au critre\"\n    \"match criterion with tag\": \"et au critre\"","module.exports = class Task extends Backbone.Model\n\n    set: (attributes, options) ->\n        super attributes, options\n\n        if attributes is \"description\"\n            tags = Task.extractTags @get('description')\n            @set 'tags', tags\n\n    containsTags: (tags) ->\n        tags = [tags] unless tags instanceof Array\n        if tags.length is 0\n            return @get('tags').length is 0\n        else\n            lowerCasedTags = @get('tags').map (tag) -> tag.toLowerCase()\n            return _.every tags, _.partial(_.contains, lowerCasedTags)\n\n    getPreviousWithTags: (tags) ->\n        order = @get 'order'\n        subCollection = @collection.getByTags tags\n        nextTask = subCollection.find (task) ->\n            return \\\n            (tags? and task.get('order') > order and task.containsTags(tags)) \\\n            or (not tags? and task.get('order') > order)\n\n        nextIndex = subCollection.indexOf nextTask\n        if nextIndex is -1\n            return _.last subCollection.toArray()\n        else\n            return subCollection.at nextIndex - 1\n\n    # weird stuff are for accentated characters\n    # see http://stackoverflow.com/questions/1073412/javascript-validation-issue-with-international-characters\n    @regex: /(^|\\s)#([\\w\\d\\-_\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]+)(?=\\s|$)/g\n\n    # helper function to extract tag from description\n    @extractTags: (desc) ->\n        tags = desc.match Task.regex\n        tags = _.unique tags\n        tags = _.map tags, (tag) -> tag.trim().replace '#', ''\n\n        return tags\n","AppView = require 'views/app_view'\n\nMenuView = require 'views/menu_view'\nTaskListView = require 'views/task_list_view'\nArchivedTaskListView = require 'views/archive_list_view'\n\nTaskCollection = require 'collections/tasks'\nArchivedTaskCollection = require 'collections/archived_tasks'\nTask = require 'models/task'\n\nmodule.exports = class Router extends Backbone.Router\n\n    routes:\n        '': 'main'\n        'archived': 'archived'\n\n        'search/:query': 'mainSearch'\n        'todoByTags/*tags/;search/:query': 'todoByTagsWithSearch'\n        'todoByTags/;search/:query': 'todoByTagsWithSearch'\n        'todoByTags/*tags': 'todoByTags'\n\n        'archivedByTags/*tags': 'archivedByTags'\n\n    initialize: ->\n        @collection = new TaskCollection initTasks\n        @archivedCollection = new ArchivedTaskCollection archivedTasks\n\n        @mainView = new AppView()\n        @mainView.render()\n\n        @menu = new MenuView\n            baseCollection: @collection\n            archivedCollection: @archivedCollection\n\n        @taskList = new TaskListView baseCollection: @collection\n        @listenTo @taskList, 'archive-tasks', (tasks) =>\n            @collection.remove tasks\n            @archivedCollection.add tasks\n            @taskList.render()\n        @archivedTaskList = new ArchivedTaskListView baseCollection: @archivedCollection\n        @listenTo @archivedTaskList, 'restore-task', (task) =>\n            @archivedCollection.remove task\n            @collection.add task\n            @archivedTaskList.render()\n\n    main: (followUp = false) ->\n\n        # if called by another route, must be called with\n        # followUp to true\n        @taskList.setSearchQuery null unless followUp\n\n        @taskList.setTags null\n        @taskList.render()\n        @menu.setViewType '#tobedone'\n        @menu.setActive null\n        @menu.render()\n\n    mainSearch: (query) ->\n        @taskList.setSearchQuery query\n        @main true\n\n    archived: ->\n        @archivedTaskList.setTags null\n        @archivedTaskList.render()\n        @menu.setViewType '#archived'\n        @menu.setActive null\n        @menu.render()\n\n    byTags: (viewType, listView, tags, searchQuery = null) ->\n\n        if tags?\n            tags = tags.split '/'\n\n            # if the last char is '/', there is an empty element\n            delete tags[tags.length - 1] if tags[tags.length - 1].length is 0\n        else\n            tags = []\n\n        listView.setTags tags\n        if viewType is '#tobedone'\n            listView.setSearchQuery searchQuery\n        listView.render()\n        @menu.setViewType viewType\n        @menu.setActive tags\n        @menu.render()\n\n    todoByTags: (tags) -> @byTags '#tobedone', @taskList, tags\n    todoByTagsWithSearch: (tags, query) ->\n        if not query?\n            query = tags\n            tags = null\n        @byTags '#tobedone', @taskList, tags, query\n\n    archivedByTags: (tags) -> @byTags '#archived', @archivedTaskList, tags\n\n\n","BaseView = require '../lib/base_view'\n\nMenuView = require './menu_view'\nTaskListView = require './task_list_view'\n\nmodule.exports = class AppView extends BaseView\n\n    el: 'body'\n    template: require './templates/home'\n","BaseView = require '../lib/base_view'\nUtils = require '../lib/utils'\n\nTask = require '../models/task'\n\nArchiveTaskView = require './archive_task_view'\nTaskFormView = require './task_form_view'\n\nmodule.exports = class ArchiveListView extends BaseView\n\n    el: '.container'\n    template: require './templates/task_list_archive'\n\n    views: null\n    collectionEl: 'ul#task-list'\n\n    constructor: (options) ->\n        @baseCollection = options.baseCollection\n        @views = new Backbone.ChildViewContainer()\n        super options\n\n    # Override\n    setTags: (tags) ->\n        @selectedTags = tags\n\n        if @collection?\n            @stopListening @collection\n            delete @collection\n\n        @collection = @baseCollection.getByTags @selectedTags\n\n        @listenTo @collection, 'add', @render\n        @listenTo @collection, 'remove', @render\n        @listenTo @collection, 'change', (task) =>\n            unless task?.get('isArchived')\n                taskView = @views.findByModel task\n                taskView.$el.fadeOut =>\n                    @stopListening taskView\n                    @views.remove taskView\n                    taskView.destroy()\n                    @trigger 'restore-task', task\n\n    getRenderData: -> title: @getTitle()\n\n    beforeRender: ->\n        @views.forEach (taskView) =>\n            if @collection.indexOf(taskView.model) isnt -1\n                taskView.$el.detach()\n            else\n                @stopListening taskView\n                @views.remove taskView\n                taskView.destroy()\n\n    # Override\n    afterRender: ->\n        @collection.forEach (task) =>\n            taskView = @views.findByModel task\n            unless taskView?\n                taskView = new ArchiveTaskView model: task\n                @views.add taskView\n            else\n                taskView.delegateEvents()\n\n            $(@collectionEl).append taskView.render().$el\n\n        return @$el\n\n    # Override\n    getTitle: ->\n        if @collection.length is @baseCollection.length\n            return t 'all archived tasks'\n        else\n            tagsList = Utils.buildTagsList @selectedTags,\n                            tagPrefix: '#'\n                            regularSeparator: ', '\n                            lastSeparator: \" #{t('and')} \"\n\n            return t 'archived tasks of',\n                tagsList: tagsList\n                smart_count: @selectedTags.length\n\n","TaskView = require './task_view'\n\nmodule.exports = class ArchiveTaskView extends TaskView\n\n    tagName: 'li'\n    className: 'task archive done'\n    template: require './templates/task_archive'\n\n    getRenderData: ->\n        date = Date.create @model.get 'completionDate'\n        return _.extend super(),\n            competionDate: date.format t 'archived date format'\n\n    afterRender: -> # noop\n\n    onClick: ->\n        @model.set 'done', false\n        @model.set 'completionDate', null\n        @model.set 'isArchived', false\n        @model.save()\n        # switch to the top of base collection\n        @render()\n\n    onMouseEnter: ->\n        button = @$ 'button'\n        if @model.get 'done'\n            button.prop 'title', t 'restore button?'\n            button.html t 'restore button?'\n\n    onMouseLeave: ->\n        button = @$ 'button'\n        if @model.get 'done'\n            button.html t 'done button'\n\n\n\n","BaseView = require '../lib/base_view'\nUtils = require '../lib/utils'\napp = require '../application'\nTask = require '../models/task'\n\nmodule.exports = class BreadcrumbItemView extends BaseView\n\n    tagName: 'div'\n    className: 'breadcrumb-item'\n    template: (value) -> \"\"\"\n    <span>#{value}</span><a></a>\n    \"\"\"\n\n    events:\n        'mouseover a': 'onRemoveHovered'\n        'mouseout a': 'onRemoveHovered'\n        'click a': 'onRemoveClicked'\n        'click': 'onClicked'\n\n    constructor: (options) ->\n        super options\n        @type = options.type\n\n        if options.type is 'tag'\n            @className = \"#{@className} tag\"\n        else\n            @className = \"#{@className} search\"\n\n    getRenderData: ->\n        if @type is 'tag'\n            return \"##{@model}\"\n        else\n            return \"\\\"#{@model}\\\"\"\n\n    onRemoveHovered: -> @$el.toggleClass 'notice-delete-action'\n\n    onRemoveClicked: ->\n        @$el.fadeOut =>\n            @destroy()\n            @trigger 'remove'\n\n    onClicked: ->\n        console.log \"something coming soon :)\"\n","BaseView = require '../lib/base_view'\nBreadcrumbItemView = require './breadcrumb_item'\nUtils = require '../lib/utils'\napp = require '../application'\nTask = require '../models/task'\n\nmodule.exports = class BreadcrumbView extends BaseView\n\n    el: '#breadcrumb'\n    views: null\n\n    constructor: (options) ->\n        @baseCollection = options.baseCollection\n        @selectedTags = options.selectedTags\n        @collectionLength = options.collectionLength\n        @searchQuery = options.searchQuery\n        @views = new Backbone.ChildViewContainer()\n        super options\n\n    render: ->\n        @noTagSelected = not @selectedTags? or @selectedTags?.length is 0\n\n        unless @selectedTags?\n            @$el.append t 'all tasks'\n        else if @noTagSelected\n            @$el.append t 'untagged tasks'\n        else\n            @$el.append t 'tasks of', smart_count: @selectedTags.length\n\n        if @selectedTags?\n            @renderSelectedTags()\n\n        if @searchQuery?\n            @renderSearchInput()\n\n        if not @selectedTags? or (@selectedTags? and not @noTagSelected)\n            @renderDefaultInput()\n\n    renderSelectedTags: ->\n        for tag in @selectedTags\n            breadcrumbItem = new BreadcrumbItemView model: tag, type: 'tag'\n            @listenTo breadcrumbItem, 'remove', @onInputChange\n            @views.add breadcrumbItem\n            tagInput = breadcrumbItem.render().$el\n            @$el.append tagInput\n\n    renderSearchInput: ->\n        translationKey = 'match criterion'\n        if @noTagSelected\n            translationKey = \"#{translationKey} no tag\"\n        else\n            translationKey = \"#{translationKey} with tag\"\n\n        breadcrumbItem = new BreadcrumbItemView model: @searchQuery, type: 'searcg'\n        @listenTo breadcrumbItem, 'remove', @onInputChange\n        @views.add breadcrumbItem\n        searchInput = breadcrumbItem.render().$el\n        @$el.append searchInput\n\n    renderDefaultInput: ->\n        # size calcultor is used to compute width of the input field\n        @$sizeCalculator = $ '<span class=\"size-calculator\"></span>'\n        @$el.append @$sizeCalculator\n\n        className = \"class='add-tag'\"\n        placeholder = \"placeholder='#{t('search tag input')}'\"\n        newTagInput = $ \"<input #{className} type='text' #{placeholder}/>\"\n        @$el.find('.size-calculator').before newTagInput\n        @bindInputEvents newTagInput\n\n    bindInputEvents: (input) ->\n        @adjustInputSize currentTarget: input\n        input.change @onInputChange\n        input.keypress @adjustInputSize\n\n    onInputChange: (evt) =>\n        if evt?\n            # correct the input to have only one tag\n            inputEl = $ evt.currentTarget\n            detectedTags = inputEl.val().match Task.regex\n            if detectedTags?\n                inputEl.val detectedTags[0]\n                @adjustInputSize evt\n\n        tags = []\n        for input in @$ '.breadcrumb-item'\n            value = $(input).find('span').html()\n\n            if value.indexOf('#') is 0\n                tag = value.replace '#', ''\n                tags.push tag if tag.length > 0\n            else\n                # cut the first and last <\"> characters\n                query = value.substr 1, value.length - 2\n\n        # we manage individually the default input\n        # it can hold a tag search or a plain text search\n        newInput = @$ 'input.add-tag'\n        newInputVal = newInput.val()\n        if newInput? and (newInputVal = newInput.val()).length > 0\n            if newInputVal.indexOf('#') is 0\n                newInputVal = newInputVal.replace '#', ''\n                tags.push newInputVal\n            else\n                # if there is already a query, we append to it\n                if query?\n                    query = \"#{query} #{newInputVal}\"\n                else\n                    query = newInputVal\n\n        tags = _.uniq tags\n\n        # if the user hasn't input a new search\n        unless query?\n            searchInput = @$ 'input.search'\n            if searchInput? and (searchInputVal = searchInput.val())?.length > 0\n                query = searchInputVal\n            else\n                query = null\n\n        if tags? and tags.length is 0\n            if query?\n                location = \"#search/#{query}\"\n            else\n                location = '#'\n            app.router.navigate location, true\n        else\n            allTags = @baseCollection.getAllTags().pluck 'id'\n\n            # if the tag doesn't exist, we don't process the change\n            if _.every tags, ((tag) -> tag in allTags)\n\n                # if the new combination of tags doesn't have related tasks\n                # we don't process the change\n                hasTasksRelatedTo = @baseCollection.getByTags(tags).length > 0\n                if hasTasksRelatedTo\n                    tags = tags.join '/'\n                    searchLocation = if query? then \"/;search/#{query}\" else ''\n                    location = \"#todoByTags/#{tags}#{searchLocation}\"\n                    app.router.navigate location, true\n                else\n                    $(evt.currentTarget).addClass 'error' if evt?\n\n            else\n                $(evt.currentTarget).addClass 'error' if evt?\n\n    adjustInputSize: (evt) =>\n        inputEl = $ evt.currentTarget\n        key = evt.keyCode or evt.charCode\n        char = String.fromCharCode key\n        inputVal = inputEl.val()\n\n        # for the default input\n        if inputVal.length is 0\n            inputVal = inputEl.prop 'placeholder'\n\n        @$sizeCalculator.text inputVal + char\n        widthToSet = @$sizeCalculator.width()\n        inputEl.width widthToSet\n\n    destroy: ->\n        @views.forEach (view) -> @stopListening view\n\n","BaseView = require '../lib/base_view'\n\nTagsCollection = require '../collections/tags'\n\nmodule.exports = class MenuItemView extends BaseView\n\n    tagName: 'li'\n    className: 'menu-tag'\n    template: require './templates/menu_item'\n    collectionEl: 'ul.submenu'\n    views: null\n    events: 'click': 'onClick'\n\n    constructor: (options) ->\n        @baseCollection = options.baseCollection\n        @archivedCollection = options.archivedCollection\n        @selectedTags = options.selectedTags\n        @depth = options.depth\n        @viewType = options.viewType\n\n        @views = new Backbone.ChildViewContainer()\n        super options\n\n    getRenderData: ->\n        params = super()\n        _.extend params, url: @buildUrl()\n        return params\n\n    buildUrl: ->\n        tagsInUrl = @selectedTags?.slice(0, @depth) or []\n        currentIndex = @selectedTags?.indexOf @model.get 'tagName'\n\n        # adding if (not in the list or parent of last selected tags)\n        # and not the last selected tag\n        if ((not _.contains(tagsInUrl, @model.get 'tagName') \\\n        or @selectedTags?.length > @depth + 1)) \\\n        and  \\\n        (not (currentIndex + 1 is @selectedTags?.length \\\n        and @depth is currentIndex))\n            tagsInUrl.push @model.get 'tagName'\n\n        if @viewType is \"#tobedone\"\n            url = \"#\"\n            prefix = 'todoByTags'\n        else\n            url = \"#archived\"\n            prefix = 'archivedByTags'\n        if tagsInUrl.length > 0\n            url = \"##{prefix}\"\n            tagsInUrl.forEach (item) -> url = \"#{url}/#{item}\"\n\n        return url\n\n    beforeRender: -> @$el.addClass 'magic' if @model.get 'isMagic'\n\n    afterRender: ->\n        currentIndex = @selectedTags?.indexOf @model.get 'tagName'\n        if  currentIndex is @depth\n            @$el.addClass 'active'\n            if @depth + 1 is @selectedTags.length then @$el.addClass 'selected'\n\n        leftPadding = (@depth + 1) * 25\n        @$('a').css 'padding-left', leftPadding\n\n        if @selectedTags? and @selectedTags[@depth] is @model.get('tagName')\n            tags = @buildTagsList()\n            tags.forEach (tagInfo) =>\n                menuItem = new MenuItemView\n                                model: new Backbone.Model\n                                    tagName: tagInfo.get 'id'\n                                    count: tagInfo.get 'count'\n                                selectedTags: @selectedTags\n                                depth: @depth + 1\n                                viewType: @viewType\n                                baseCollection: @baseCollection\n                                archivedCollection: @archivedCollection\n\n                @views.add menuItem\n                @$el.children(@collectionEl).append menuItem.render().$el\n\n    buildTagsList: ->\n        excludedItems = @selectedTags or []\n        excludedItems = excludedItems.slice 0, @depth + 1\n\n        includedTags = @selectedTags or []\n        includedTags = includedTags.slice 0, @depth + 1\n\n\n        delete @collection if @collection?\n\n        if @viewType is \"#tobedone\" then collection = @baseCollection\n        else collection = @archivedCollection\n\n        @collection = collection.getByTags includedTags\n        tagsList = TagsCollection.extractFromTasks @collection,\n                                                    excludedItems,\n                                                    @selectedTags\n        return tagsList\n","BaseView = require '../lib/base_view'\n\nMenuItemView = require './menu_item_view'\n\nmodule.exports = class MenuView extends BaseView\n\n    el: '#menu'\n    template: require './templates/menu'\n\n    views: null\n    collectionEl: 'ul.tags'\n\n    activeTags: null\n    subMenuHandler: null\n\n    constructor: (options) ->\n        @baseCollection = options.baseCollection\n        @archivedCollection = options.archivedCollection\n        @views = new Backbone.ChildViewContainer()\n        super options\n\n    initialize: (options) ->\n        @listenTo @baseCollection,\n            'add': @onChange\n            'change': @onChange\n            'remove': @onChange\n\n        @listenTo @archivedCollection,\n            'add': @onChange\n            'change': @onChange\n            'remove': @onChange\n\n        super options\n\n    getRenderData: ->\n\n        if @archivedCollection.length > 1000 then archivedCount = 'Over 9000++'\n        else archivedCount = @archivedCollection.length\n\n        # return\n        allCount: @baseCollection.length\n        untaggedCount: @baseCollection\n                            .filter((task) ->\n                                task.get('tags').length is 0\n                            ).length\n        archivedCount: archivedCount\n\n    beforeRender: ->\n        tagsList = @baseCollection.getAllTags()\n        @views.forEach (taskView) =>\n            if tagsList.indexOf(taskView.model.get('tagName')) isnt -1\n                taskView.$el.detach()\n            else\n                @stopListening taskView\n                @views.remove taskView\n                taskView.destroy()\n\n    afterRender: ->\n        typeViewEl = @$ \"#{@viewType}\"\n        submenuEl = @$ \"#{@viewType} > .submenu\"\n\n        if @viewType is \"#tobedone\" then @collection = @baseCollection\n        else @collection = @archivedCollection\n\n        # Rendering the \"magic\" tag: untagged\n        # Must be re-thought if more magic tags are added\n        untaggedNum = @collection\n            .filter((task) ->\n                task.get('tags').length is 0\n            ).length\n        if untaggedNum > 0\n            template = require './templates/menu_item'\n            if @viewType is \"#tobedone\" then prefix = 'todoByTags'\n            else prefix = 'archivedByTags'\n            if @searchQuery?\n                search = \";search/#{@searchQuery}\"\n            else\n                search = ''\n            isActive = if @activeTags?.length is 0 then \" active selected\" else \"\"\n            untaggedView = $ '<li class=\"menu-tag magic' + isActive + '\"></li>'\n            untaggedViewContent = template\n                url: \"##{prefix}/#{search}\"\n                model:\n                    tagName: t 'untagged'\n                    count: untaggedNum\n            untaggedView.append untaggedViewContent\n            submenuEl.append untaggedView\n\n        if @viewType is \"#tobedone\"\n            archivedListEl = @$ '#archived'\n            @$('ul:first-child').prepend archivedListEl\n\n        tags = @collection.getAllTags()\n        tags.forEach (tagInfo) =>\n            menuItem = new MenuItemView\n                            model: new Backbone.Model\n                                tagName: tagInfo.get 'id'\n                                count: tagInfo.get 'count'\n                                isMagic: tagInfo.get 'isMagic'\n                            selectedTags: @activeTags\n                            depth: 0\n                            viewType: @viewType\n                            baseCollection: @baseCollection\n                            archivedCollection: @archivedCollection\n\n            @views.add menuItem\n            submenuEl.append menuItem.render().$el\n\n        typeViewEl.addClass 'active'\n        typeViewEl.addClass 'selected' unless @activeTags?\n        return @$el\n\n    onChange: -> @render()\n    setActive: (tags) -> @activeTags = tags\n    setViewType: (viewType) -> @viewType = viewType\n","BaseView = require '../lib/base_view'\nUtils = require '../lib/utils'\n\nTaskView = require './task_view'\n\nmodule.exports = class TaskFormView extends BaseView\n\n    el: '#new-task'\n    template: require './templates/task_form'\n\n    events:\n        'keydown input': 'onKeydown'\n        'keyup input': 'onKeyup'\n        'blur input': 'onSubmit'\n        'click button': 'onSubmit'\n\n    initialize: (options) ->\n        super()\n        @tags = options.tags\n\n    onKeydown: (event) ->\n        key = event.keyCode or event.charCode\n        inputVal = @$('input').val()\n        tagsList = Utils.buildTagsList @tags, tagPrefix: '#'\n        tagsList =  \"#{tagsList} \" if tagsList isnt \"\"\n\n        # neutral keys shouldn't add the tags list\n        # backspace, space, tab, enter, top/bottom/left/right arrows\n        neutralKeys = [\n            8, 32, 9, 13, 38, 40, 37, 39\n        ]\n\n        # sharp key on OSX, Ctrl+V is authorized\n        authorizedComboKeys = [220, 86]\n        if inputVal.length is 0 and key not in neutralKeys \\\n        and (not (event.metaKey or event.ctrlKey or event.altKey) \\\n        or key in authorizedComboKeys)\n            @$('input').val tagsList\n            inputVal = tagsList\n\n    onKeyup: (event) ->\n        key = event.keyCode or event.charCode\n        inputVal = @$('input').val()\n\n        # change the submit button state\n        if inputVal.length is 0\n            @$('button').addClass 'disabled'\n        else\n            @$('button').removeClass 'disabled'\n\n        # 'enter' submit the form\n        @onSubmit() if key is 13\n\n        # move the focus to the first task when key is 'arrow bottom'\n        @trigger 'focus-down' if key is 40\n\n    onSubmit: ->\n        inputVal = @$('input').val()\n        @trigger 'new-task-submitted', content: inputVal if inputVal.length > 0\n        @$('input').val ''\n\n    getRenderData: ->\n        formPlaceholder: @getFormPlaceholder()\n\n    getFormPlaceholder: ->\n        tagsList = Utils.buildTagsList @tags,\n                            tagPrefix: '#'\n                            regularSeparator: ', '\n                            lastSeparator: \" #{t('and')} \"\n\n        if tagsList.length > 0\n            return t 'form headline tags', tagsList: tagsList\n        else\n            return t 'form headline'\n","BaseView = require '../lib/base_view'\nUtils = require '../lib/utils'\n\nTask = require '../models/task'\n\nTaskView = require './task_view'\nTaskFormView = require './task_form_view'\nBreadcrumbView = require './breadcrumb_view'\n\nmodule.exports = class TaskListView extends BaseView\n\n    el: '.container'\n    template: require './templates/task_list'\n\n    views: null\n    collectionEl: 'ul#task-list'\n\n    isReindexing: false\n\n    events:\n        'click #archive-action': 'onArchiveClicked'\n        #'click h1': 'reindex'\n        'onkeydown h1 input': 'onKeyDownMenuInput'\n\n    reindex: ->\n        @baseCollection.reindex()\n\n    constructor: (options) ->\n        @baseCollection = options.baseCollection\n        @views = new Backbone.ChildViewContainer()\n        super options\n\n    initialize: ->\n        @listenTo @baseCollection, 'reindexing', ->\n            @isReindexing = true\n            $('#block').show()\n            $('#modal').show()\n\n        @listenTo @baseCollection, 'reindexed', (error) ->\n            @isReindexing = false\n            $('#block').hide()\n            $('#modal').hide()\n            console.log error if error?\n\n    setSearchQuery: (searchQuery) -> @searchQuery = searchQuery\n\n    setTags: (tags) ->\n        @selectedTags = tags\n\n        if @collection?\n            @stopListening @collection\n            delete @collection\n\n        @collection = @baseCollection.getByTags @selectedTags\n\n        @listenTo @collection, 'add', @render\n        @listenTo @collection, 'remove', (task) =>\n            # set the focus to the previous view\n            previousVisibleTask = task.getPreviousWithTags @selectedTags\n            if previousVisibleTask?\n                @taskModelCIDToFocus = previousVisibleTask.cid\n\n            @render()\n\n        @listenTo @collection, 'change', (task) => @updateArchiveButtonState()\n\n    getRenderData: -> title: @getTitle()\n\n    beforeRender: ->\n        @views.forEach (taskView) =>\n            if @collection.indexOf(taskView.model) isnt -1\n                taskView.$el.detach()\n            else\n                @stopListening taskView\n                @views.remove taskView\n                taskView.destroy()\n\n    afterRender: ->\n\n        @updateArchiveButtonState()\n\n        if @taskForm?\n            @stopListening @taskForm\n            @taskForm.destroy()\n\n        # we hide the form is there is a search to prevent the user\n        # from adding a task and not being able to see it\n        unless @searchQuery?\n            @taskForm = new TaskFormView tags: @selectedTags\n            @listenTo @taskForm, 'new-task-submitted', @createNewTask\n            @listenTo @taskForm, 'focus-down', @onFocusDown\n            @taskForm.render()\n\n        if @searchQuery?\n            regex = new RegExp @searchQuery, 'i'\n            list = @collection.filter (task) ->\n                regex.test task.get('description')\n        else\n            list = @collection\n\n        list.forEach (task) =>\n            taskView = @views.findByModel task\n            unless taskView?\n                taskView = new TaskView model: task\n                @views.add taskView\n                @listenTo taskView, 'new-task-submitted', @createNewTask\n                @listenTo taskView, 'focus-up', @onFocusUp\n                @listenTo taskView, 'focus-down', @onFocusDown\n                @listenTo taskView, 'move-up', @onMoveUp\n                @listenTo taskView, 'move-down', @onMoveDown\n            else\n                taskView.delegateEvents()\n\n            $(@collectionEl).append taskView.render().$el\n\n        @renderFormTitle()\n\n        # if an element has been created or removed, focus task accordingly\n        if @taskModelCIDToFocus?\n            view =  @views.findByModelCid @taskModelCIDToFocus\n            if view?\n                view.setFocus()\n            else\n                console.log \"something went wrong trying to focus\"\n                @taskForm.$el.find('input').focus()\n            @taskModelCIDToFocus = null\n        else\n            # if there is a search, the form is not displayed\n            @taskForm.$el.find('input').focus() if @taskForm?\n\n        return @$el\n\n    renderFormTitle: ->\n        breadcrumbView = new BreadcrumbView\n                            selectedTags: @selectedTags\n                            collectionLength: @collection.length\n                            baseCollection: @baseCollection\n                            searchQuery: @searchQuery\n        breadcrumbView.render()\n\n    getTitle: ->\n        if @collection.length is @baseCollection.length\n            return t 'all tasks'\n        else if @selectedTags? and @selectedTags.length is 0\n            return t 'untagged tasks'\n        else\n            tagsList = Utils.buildTagsList @selectedTags,\n                            tagPrefix: '#'\n                            regularSeparator: ', '\n                            lastSeparator: \" #{t('and')} \"\n\n            tagsList = ''\n            return t 'tasks of',\n                tagsList: tagsList\n                smart_count: @selectedTags.length\n\n    createNewTask: (options = {}) ->\n        return if @isReindexing\n\n        tagsList = Utils.buildTagsList @selectedTags, tagPrefix: '#'\n        tagsList =  \"#{tagsList} \" if tagsList isnt \"\"\n        content = options.content or tagsList\n\n        if options.previous?\n            previous = @views.findByModelCid(options.previous).model\n            nextIndex = @baseCollection.indexOf(previous) + 1\n            newNext = @baseCollection.at nextIndex\n            {order, step} = @baseCollection.getNewOrder previous, newNext\n            index = nextIndex\n        else\n            newNext = @baseCollection.at 0\n            {order, step} = @baseCollection.getNewOrder null, newNext\n            index = 0\n\n        task = new Task\n            description: content\n            order: order\n            tags: Task.extractTags content\n\n        # set the focus on the new task during next render\n        @taskModelCIDToFocus = if options.previous? then task.cid else null\n\n        @baseCollection.create task, at: index\n\n        @checkIfReindexationIsNeeded step\n\n    onFocusUp: (cid) ->\n        currentModel = @views.findByModelCid(cid).model\n        previousIndex = @collection.indexOf(currentModel) - 1\n        previousModel = @collection.at previousIndex\n\n        if previousIndex >= 0\n            @views.findByModel(previousModel).setFocus()\n        else\n            @taskForm.$el.find('input').focus()\n\n    onFocusDown: (cid) ->\n        if cid?\n            currentModel = @views.findByModelCid(cid).model\n            nextIndex = @collection.indexOf(currentModel) + 1\n            nextModel = @collection.at nextIndex\n        else\n            nextIndex = 0\n            nextModel = @collection.at nextIndex\n\n        if nextIndex < @views.length\n            @views.findByModel(nextModel).setFocus()\n\n    onMoveUp: (cid, toFocus = null) ->\n        return if @isReindexing\n\n        # we want to move up to the previous model in the base collection\n        # so we need to know where is it then make get the new order\n        currentModel = @views.findByModelCid(cid).model\n        previousIndexInSubCollection = @collection.indexOf(currentModel) - 1\n        previous = @collection.at previousIndexInSubCollection\n        previousIndex = @baseCollection.indexOf previous\n        previousOfPrevious = @baseCollection.at(previousIndex - 1) or null\n\n        if previousIndex >= 0\n            newOrder = @baseCollection.getNewOrder previousOfPrevious, previous\n            {order, step} = newOrder\n            currentModel.set 'order', order\n            currentModel.save()\n            @baseCollection.sort()\n            @taskModelCIDToFocus = if toFocus? then toFocus else cid\n            @render()\n\n            @checkIfReindexationIsNeeded step\n\n    onMoveDown: (cid) ->\n        return if @isReindexing\n\n        # we want to move up to the next model in the base collection\n        # so we need to know where is it then make get the new order\n        currentModel = @views.findByModelCid(cid).model\n        nextIndexInSubCollection = @collection.indexOf(currentModel) + 1\n        next = @collection.at nextIndexInSubCollection\n        nextIndex = @baseCollection.indexOf next\n        nextOfNextModel = @baseCollection.at(nextIndex + 1) or null\n\n        # if not last item of the collection\n        if nextIndex isnt @baseCollection.length and \\\n           nextIndexInSubCollection isnt @collection.length\n            newOrder = @baseCollection.getNewOrder next, nextOfNextModel\n            {order, step} = newOrder\n            currentModel.set 'order', order\n            currentModel.save()\n            @baseCollection.sort()\n            @taskModelCIDToFocus = if toFocus? then toFocus else cid\n            @render()\n\n            @checkIfReindexationIsNeeded step\n\n    updateArchiveButtonState: ->\n        if @collection.where(done: true).length > 0\n            @$('#archive-action').removeClass 'disable'\n        else\n            @$('#archive-action').addClass 'disable'\n\n    onArchiveClicked: ->\n        return if @isReindexing\n\n        tasksToArchive = @collection.where done: true\n        counterToArchive = tasksToArchive.length\n        counterArchived = 0\n\n        if counterToArchive > 0\n            @$('#archive-action').html '&nbsp;'\n            @$('#archive-action').spin 'tiny', '#fff'\n\n        done = (task) =>\n            counterArchived++\n            taskView = @views.findByModel task\n            # when all requests are done\n            if counterArchived is counterToArchive\n                @stopListening taskView\n                @views.remove taskView\n                taskView.$el.fadeOut =>\n                    taskView.destroy()\n                    @$('#archive-action').html t 'archive button'\n                    @trigger 'archive-tasks', tasksToArchive\n            else\n                @stopListening taskView\n                @views.remove taskView\n                taskView.$el.fadeOut ->\n                    taskView.destroy()\n\n        tasksToArchive.forEach (task) ->\n            task.set 'isArchived', true\n            task.once 'sync', done\n            task.save()\n\n    checkIfReindexationIsNeeded: (step) ->\n\n        threshold = Math.pow 10, 8\n        maxThreshold = Number.MAX_VALUE / (@baseCollection.length + 1)\n        threshold = maxThreshold if maxThreshold < threshold\n\n        @baseCollection.reindex() if step <= threshold\n\n","BaseView = require '../lib/base_view'\n\nmodule.exports = class TaskView extends BaseView\n\n    tagName: 'li'\n    className: 'task'\n    template: require './templates/task'\n\n    events:\n        'keydown  input': 'onKeydown'\n        'keyup  input': 'onKeyup'\n        'focus input': 'onFocus'\n        'blur input': 'onBlur'\n        'click button': 'onClick'\n        'mouseenter button': 'onMouseEnter'\n        'mouseleave button': 'onMouseLeave'\n\n    getRenderData: ->\n        model: @model.toJSON()\n        tabindex: @model.collection.indexOf(@model) + 2\n\n    afterRender: ->\n        if @model.get 'done'\n            @$el.addClass 'done'\n            @$('button').html t 'done button'\n        else\n            @$el.removeClass 'done'\n\n    onClick: ->\n        @model.set 'done', not @model.get 'done'\n        if @model.get 'done'\n            @model.set 'completionDate', Date.now()\n        else\n            @model.set 'completionDate', null\n        @afterRender()\n        @model.save()\n        @render()\n\n    onKeydown: (event) ->\n        key = event.keyCode or event.charCode\n        ctrlPressed = event.controlKey or event.metaKey\n\n        # 'backspace' key\n        if @$('input').val() is \"\" and key is 8\n            @model.destroy()\n            # prevent from going back into browser history\n            event.preventDefault()\n\n        else if key is 38 and ctrlPressed\n            @trigger 'move-up', @model.cid\n        else if key is 40 and ctrlPressed\n            @trigger 'move-down', @model.cid\n\n        @stopPerdiodicSave()\n        @startPeriodicSave()\n\n    onKeyup: (event) ->\n        key = event.keyCode or event.charCode\n\n        # 'enter' key\n        if key is 13\n            @onBlur() # save the current task\n            @trigger 'new-task-submitted',\n                content: ''\n                previous: @model.cid\n        else if key is 38 # top arrow\n            @trigger 'focus-up', @model.cid\n        else if key is 40 # bottom arrow\n            @trigger 'focus-down', @model.cid\n\n    onFocus: ->\n        @startPeriodicSave()\n\n    onBlur: ->\n        @stopPerdiodicSave()\n        @saveDescription()\n\n    startPeriodicSave: ->\n        @focusInterval = setInterval () =>\n            @saveDescription() if @$('input').val() isnt \"\"\n        , 2000\n\n    stopPerdiodicSave: ->\n        clearInterval @focusInterval\n\n    saveDescription: ->\n        description = @$('input').val()\n        if description isnt @model.get 'description'\n            # triggers the extract tags process\n            @model.set 'description', description\n            @model.save()\n\n    setFocus: ->\n        inputField = @$ 'input'\n        inputField.focus()\n        index = inputField.val().length\n        inputField[0].setSelectionRange index, index\n\n    onMouseEnter: ->\n        button = @$ 'button'\n        if @model.get 'done'\n            button.attr 'title', t 'todo button?'\n            button.html t 'todo button?'\n        else\n            button.attr 'title', t 'done button?'\n            button.html t 'done button?'\n\n    onMouseLeave: ->\n        button = @$ 'button'\n        if @model.get 'done'\n            button.html t 'done button'\n        else\n            button.html t 'todo button'\n\n    destroy: ->\n        clearTimeout @focusInterval\n        super()\n\n\n\n","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n\nbuf.push(\"<div id=\\\"menu\\\"></div><div class=\\\"container\\\"></div><div id=\\\"block\\\"></div><div id=\\\"modal\\\"><p>\" + (jade.escape(null == (jade_interp = t('reindexing message')) ? \"\" : jade_interp)) + \"</p></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\nvar locals_ = (locals || {}),allCount = locals_.allCount,archivedCount = locals_.archivedCount;\nbuf.push(\"<ul><li id=\\\"tobedone\\\" class=\\\"first-level\\\"><a href=\\\"#\\\">\" + (jade.escape((jade_interp = t('todo')) == null ? '' : jade_interp)) + \" (\" + (jade.escape((jade_interp = allCount) == null ? '' : jade_interp)) + \")</a><ul class=\\\"submenu\\\"></ul></li><li id=\\\"archived\\\" class=\\\"first-level\\\"><a href=\\\"#archived\\\">\" + (jade.escape((jade_interp = t('archived')) == null ? '' : jade_interp)) + \" (\" + (jade.escape((jade_interp = archivedCount) == null ? '' : jade_interp)) + \")</a><ul class=\\\"submenu\\\"></ul></li></ul>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\nvar locals_ = (locals || {}),url = locals_.url,model = locals_.model;\nbuf.push(\"<a\" + (jade.attr(\"href\", \"\" + (url) + \"\", true, false)) + (jade.attr(\"title\", \"\" + (model.tagName) + \"\", true, false)) + \"><i class=\\\"tag-icon\\\"></i><span>\" + (jade.escape((jade_interp = model.tagName) == null ? '' : jade_interp)) + \" (\" + (jade.escape((jade_interp = model.count) == null ? '' : jade_interp)) + \")</span></a><ul class=\\\"submenu\\\"></ul>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\nvar locals_ = (locals || {}),model = locals_.model,tabindex = locals_.tabindex;\nbuf.push(\"<div class=\\\"task-container\\\"><button title=\\\"t('todo button')\\\" class=\\\"toggle-state button\\\">\" + (jade.escape(null == (jade_interp = t('todo button')) ? \"\" : jade_interp)) + \"</button><div class=\\\"todo-field\\\"><input\" + (jade.attr(\"value\", \"\" + (model.description) + \"\", true, false)) + (jade.attr(\"tabindex\", \"\" + (tabindex) + \"\", true, false)) + \"/></div></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\nvar locals_ = (locals || {}),model = locals_.model,tabindex = locals_.tabindex,competionDate = locals_.competionDate;\nbuf.push(\"<div class=\\\"task-container\\\"><button\" + (jade.attr(\"title\", \"\" + (t('done button')) + \"\", true, false)) + \" class=\\\"toggle-state button\\\">\" + (jade.escape(null == (jade_interp = t('done button')) ? \"\" : jade_interp)) + \"</button><div class=\\\"todo-field\\\"><input\" + (jade.attr(\"value\", \"\" + (model.description) + \"\", true, false)) + (jade.attr(\"tabindex\", \"\" + (tabindex) + \"\", true, false)) + \"/></div></div><div class=\\\"todo-completionDate\\\"><p>\" + (jade.escape((jade_interp = t('completed headline')) == null ? '' : jade_interp)) + \" \" + (jade.escape((jade_interp = competionDate) == null ? '' : jade_interp)) + \"</p></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\nvar locals_ = (locals || {}),formPlaceholder = locals_.formPlaceholder;\nbuf.push(\"<div class=\\\"task-container\\\"><button class=\\\"toggle-state button disabled\\\">\" + (jade.escape(null == (jade_interp = t('new button')) ? \"\" : jade_interp)) + \"</button><div class=\\\"todo-field\\\"><input tabindex=\\\"1\\\"\" + (jade.attr(\"placeholder\", \"\" + (formPlaceholder) + \"\", true, false)) + \"/></div></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n\nbuf.push(\"<h1 id=\\\"breadcrumb\\\"></h1><p id=\\\"actions\\\">\" + (jade.escape((jade_interp = t('actions headline')) == null ? '' : jade_interp)) + \":<button id=\\\"archive-action\\\" class=\\\"button disable\\\">\" + (jade.escape(null == (jade_interp = t('archive button')) ? \"\" : jade_interp)) + \"</button></p><div id=\\\"new-task\\\" class=\\\"task\\\"></div><ul id=\\\"task-list\\\"></ul>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\nvar locals_ = (locals || {}),title = locals_.title;\nbuf.push(\"<h1>\" + (jade.escape((jade_interp = title) == null ? '' : jade_interp)) + \"</h1><ul id=\\\"task-list\\\"></ul>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}"]}